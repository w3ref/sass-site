<!DOCTYPE html> <html class=no-js lang=ru> <head> <meta charset=utf-8> <meta content='IE=edge' http-equiv=X-UA-Compatible> <title>Sass: Мигратор</title> <meta content='Syntactically Awesome Style Sheets' name=description> <meta content='width=device-width, initial-scale=1' name=viewport> <link href='/feed.xml' rel=alternate type='application/atom+xml'> <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,600|Source+Serif+Pro" rel=stylesheet /> <link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel=stylesheet /> <link href="/assets/css/sass-dfc221cc.css" rel=stylesheet /> <noscript><link href="/assets/css/noscript-c6723936.css" rel=stylesheet /></noscript> <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PCCZT7S');
</script> </head> <body class='documentation documentation_cli documentation_cli_migrator'> <noscript> <iframe height=0 src='https://www.googletagmanager.com/ns.html?id=GTM-PCCZT7S' style='display:none;visibility:hidden' width=0></iframe> </noscript> <!--[if lt IE 9]><p class=browserupgrade> You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security. </p><![endif]--> <header class=sl-r-banner itemscope=itemscope itemtype='http://schema.org/WPHeader' role=banner> <div class=sl-c-pop-stripe></div> <div class=sl-l-container> <div class='sl-l-grid sl-l-grid--full sl-l-large-grid--fit sl-l-large-grid--center sl-l-large-grid--gutters'> <p class='sl-l-grid__column sl-r-banner__brand'> <a href="/"><img alt=Sass height=48 src="/assets/img/logos/logo-b6e1ef6e.svg"/> </a></p> <nav aria-label='Site navigation' class='sl-r-banner__navigation sl-l-grid__column sl-l-large-grid sl-l-large-grid__column--auto-size sl-c-list-horizontal-wrapper' itemscope=itemscope itemtype='http://schema.org/SiteNavigationElement' role=navigation> <ul> <li><a href="/install">Установить</a></li> <li><a href="/guide">Изучить Sass</a></li> <li><a href="/blog">Блог</a></li> <li><a href="/documentation">Документация</a></li> <li><a href="/community">Участвовать</a></li> <li><label class=visuallyhidden for=s>Поиск</label><input placeholder='Искать' class=search id=s name=s></li> </ul> </nav> </div> </div> </header> <main class=content id=main-content itemprop=mainContentOfPage role=main> <h1 class=sl-l-container> Мигратор </h1> <div class='sl-background--white sl-l-container sl-l-section'><div class=sl-l-medium-holy-grail> <div class=sl-l-medium-holy-grail__body> <nav aria-label='Content navigation' class=sl-l-medium-holy-grail__navigation role=navigation> <div class='sl-c-list-navigation-wrapper sl-c-list-navigation-wrapper--collapsible'> <h2>Содержание</h2> <ul><li><a href="/documentation/syntax" class=section>Синтаксис</a> <ul><li class=overview><a href="/documentation/syntax">Обзор</a></li> <li><a href="/documentation/syntax/parsing" class="">Парсинг таблицы стилей</a> </li> <li><a href="/documentation/syntax/structure" class="">Структура таблицы стилей</a> </li> <li><a href="/documentation/syntax/comments" class="">Комментарии</a> </li> <li><a href="/documentation/syntax/special-functions" class="">Специальные функции</a> </li> </ul> </li> <li><a href="/documentation/style-rules" class=section>Правила стиля</a> <ul><li class=overview><a href="/documentation/style-rules">Обзор</a></li> <li><a href="/documentation/style-rules/declarations" class="">Объявления свойств</a> </li> <li><a href="/documentation/style-rules/parent-selector" class="">Родительский селектор</a> </li> <li><a href="/documentation/style-rules/placeholder-selectors" class="">Селекторы-заполнители</a> </li> </ul> </li> <li><a href="/documentation/variables" class="">Переменные</a> </li> <li><a href="/documentation/interpolation" class="">Интерполяция</a> </li> <li><a href="/documentation/at-rules" class=section>At-Правила</a> <ul><li class=overview><a href="/documentation/at-rules">Обзор</a></li> <li><a href="/documentation/at-rules/use" class=""><code>@use</code></a> </li> <li><a href="/documentation/at-rules/forward" class=""><code>@forward</code></a> </li> <li><a href="/documentation/at-rules/import" class=""><code>@import</code></a> </li> <li><a href="/documentation/at-rules/mixin" class=""><code>@mixin</code> and <code>@include</code></a> </li> <li><a href="/documentation/at-rules/function" class=""><code>@function</code></a> </li> <li><a href="/documentation/at-rules/extend" class=""><code>@extend</code></a> </li> <li><a href="/documentation/at-rules/error" class=""><code>@error</code></a> </li> <li><a href="/documentation/at-rules/warn" class=""><code>@warn</code></a> </li> <li><a href="/documentation/at-rules/debug" class=""><code>@debug</code></a> </li> <li><a href="/documentation/at-rules/at-root" class=""><code>@at-root</code></a> </li> <li><a href="/documentation/at-rules/control" class=section>Управление потоком</a> <ul><li class=overview><a href="/documentation/at-rules/control">Обзор</a></li> <li><a href="/documentation/at-rules/control/if" class=""><code>@if</code> and <code>@else</code></a> </li> <li><a href="/documentation/at-rules/control/each" class=""><code>@each</code></a> </li> <li><a href="/documentation/at-rules/control/for" class=""><code>@for</code></a> </li> <li><a href="/documentation/at-rules/control/while" class=""><code>@while</code></a> </li> </ul> </li> <li><a href="/documentation/at-rules/css" class="">Из CSS</a> </li> </ul> </li> <li><a href="/documentation/values" class=section>Значения</a> <ul><li class=overview><a href="/documentation/values">Обзор</a></li> <li><a href="/documentation/values/numbers" class="">Числа</a> </li> <li><a href="/documentation/values/strings" class="">Строки</a> </li> <li><a href="/documentation/values/colors" class="">Цвета</a> </li> <li><a href="/documentation/values/lists" class="">Списки</a> </li> <li><a href="/documentation/values/maps" class="">Карты</a> </li> <li><a href="/documentation/values/booleans" class=""><code>true</code> и <code>false</code></a> </li> <li><a href="/documentation/values/null" class=""><code>null</code></a> </li> <li><a href="/documentation/values/functions" class="">Функции</a> </li> </ul> </li> <li><a href="/documentation/operators" class=section>Операторы</a> <ul><li class=overview><a href="/documentation/operators">Обзор</a></li> <li><a href="/documentation/operators/equality" class="">Равенства</a> </li> <li><a href="/documentation/operators/relational" class="">Отношения</a> </li> <li><a href="/documentation/operators/numeric" class="">Числа</a> </li> <li><a href="/documentation/operators/string" class="">Строки</a> </li> <li><a href="/documentation/operators/boolean" class="">Логические</a> </li> </ul> </li> <li><a href="/documentation/modules" class=section>Встроенные модули</a> <ul><li class=overview><a href="/documentation/modules">Обзор</a></li> <li><a href="/documentation/modules/color" class=""><code>sass:color</code></a> </li> <li><a href="/documentation/modules/list" class=""><code>sass:list</code></a> </li> <li><a href="/documentation/modules/map" class=""><code>sass:map</code></a> </li> <li><a href="/documentation/modules/math" class=""><code>sass:math</code></a> </li> <li><a href="/documentation/modules/meta" class=""><code>sass:meta</code></a> </li> <li><a href="/documentation/modules/selector" class=""><code>sass:selector</code></a> </li> <li><a href="/documentation/modules/string" class=""><code>sass:string</code></a> </li> </ul> </li> <li><a href="/documentation/breaking-changes" class=section>Критические изменения</a> <ul><li class=overview><a href="/documentation/breaking-changes">Обзор</a></li> <li><a href="/documentation/breaking-changes/slash-div" class=""><code>/</code> как Деление</a> </li> <li><a href="/documentation/breaking-changes/color-units" class="">Единицы цвета</a> </li> <li><a href="/documentation/breaking-changes/extend-compound" class="">Расширение составных селекторов</a> </li> <li><a href="/documentation/breaking-changes/css-vars" class="">Синтаксис переменных CSS</a> </li> </ul> </li> <li><a href="/documentation/cli" class="section open selected">Командная строка</a> <ul><li class=overview><a href="/documentation/cli">Обзор</a></li> <li><a href="/documentation/cli/dart-sass" class="">Dart Sass</a> </li> <li><a href="/documentation/cli/ruby-sass" class="">Ruby Sass</a> </li> <li><a href="/documentation/cli/migrator" class="open selected">Мигратор</a> </li> </ul> </li> <li><a href="/documentation/js-api" class="">JavaScript API</a> </li> </ul> </div> </nav> <div class=sl-l-medium-holy-grail__main> <div class=sl-l-large-holy-grail> <div class=sl-l-large-holy-grail__body> <div class='sl-l-large-holy-grail__complementary sl-l-large-holy-grail__complementary--contents'> <nav aria-labelledby=page-sections class='page-sections sl-c-list-navigation-wrapper sl-c-list-navigation-wrapper--collapsible'> <h3 id=page-sections>Разделы страницы</h3> <ul> <li> <a href="#part-c100d7438cf49bea">Применение</a> </li> <li> <a href="#part-67c4816e04d140c4" class=section>Установка</a> <ul> <li class=overview><a href="#part-67c4816e04d140c4">Обзор</a></li> <li> <a href="#part-16dfeecfe4bc43a1">Автономный</a> </li> <li> <a href="#npm">npm</a> </li> <li> <a href="#chocolatey">Chocolatey</a> </li> <li> <a href="#homebrew">Homebrew</a> </li> </ul> </li> <li> <a href="#part-84a603221cae2f1c" class=section>Глобальные опции</a> <ul> <li class=overview><a href="#part-84a603221cae2f1c">Обзор</a></li> <li> <a href="#migrate-deps"><code>--migrate-deps</code></a> </li> <li> <a href="#load-path"><code>--load-path</code></a> </li> <li> <a href="#dry-run" class=section><code>--dry-run</code></a> <ul> <li class=overview><a href="#dry-run">Обзор</a></li> <li> <a href="#no-unicode"><code>--no-unicode</code></a> </li> </ul> </li> <li> <a href="#verbose"><code>--verbose</code></a> </li> </ul> </li> <li> <a href="#part-277e6babc615a34" class=section>Миграции</a> <ul> <li class=overview><a href="#part-277e6babc615a34">Обзор</a></li> <li> <a href="#part-a1000cc4d15aa46f" class=section>Разделение</a> <ul> <li class=overview><a href="#part-a1000cc4d15aa46f">Обзор</a></li> <li> <a href="#pessimistic"><code>--pessimistic</code></a> </li> </ul> </li> <li> <a href="#part-1d4ad22a267c8a3f" class=section>Модуль</a> <ul> <li class=overview><a href="#part-1d4ad22a267c8a3f">Обзор</a></li> <li> <a href="#part-b5349be3348df73d">Загрузка зависимостей</a> </li> <li> <a href="#remove-prefix"><code>--remove-prefix</code></a> </li> <li> <a href="#forward"><code>--forward</code></a> </li> </ul> </li> <li> <a href="#part-9f3b6c07ad83c831" class=section>Пространство имен</a> <ul> <li class=overview><a href="#part-9f3b6c07ad83c831">Обзор</a></li> <li> <a href="#rename"><code>--rename</code></a> </li> <li> <a href="#force"><code>--force</code></a> </li> </ul> </li> </ul> </li> </ul> </nav> </div> <div class='sl-l-large-holy-grail__main docSearch-content'> <div class='sl-l-container sl-l-container--small'> <div class=sl-c-introduction> <p>Мигратор Sass автоматически обновляет ваши файлы Sass, чтобы помочь вам перейти на последнюю и лучшую версию языка. Каждая из его команд переносит отдельную функцию, чтобы вы могли максимально контролировать, что и когда обновлять.</p> </div> <h2 id=part-c100d7438cf49bea> <a class=anchor href="#part-c100d7438cf49bea"><span class=visuallyhidden>Применение permalink</span></a>Применение</h2> <p>Чтобы использовать Sass migrator, сообщите ему <a href="#migrations">какую миграцию</a> вы хотите запустить и какие файлы Sass вы хотите&nbsp;перенести:</p> <pre class="highlight plaintext"><code>sass-migrator &lt;migration&gt; &lt;entrypoint.scss...&gt;
</code></pre> <p>По умолчанию мигратор изменяет только файлы, которые вы явно передаете в командной&nbsp;строке. Передача <a href="#migrate-deps">параметра <code>--migrate-deps</code></a> указывает мигратору также изменить все таблицы стилей, которые загружаются с использованием <a href="../at-rules/use">правила <code>@use</code></a>, <a href="../at-rules/forward">правила <code>@forward</code></a> или <a href="../at-rules/import">правила <code>@import</code></a>. А если вы хотите выполнить тестовый запуск, чтобы увидеть, какие изменения будут внесены без их фактического сохранения, вы можете передать <code><a href="#dry-run">--dry-run</a> <a href="#verbose">--verbose</a></code> (или <code>-nv</code> для&nbsp;краткости).</p> <pre class="highlight plaintext"><code>$ cat style.scss
$body-bg: #000;
$body-color: #111;

@import "bootstrap";

@include media-breakpoint-up(sm) {
  .navbar {
    display: block;
  }
}
$ sass-migrator --migrate-deps module style.scss
$ cat style.scss
@use "bootstrap" with (
  $body-bg: #000,
  $body-color: #111
);

@include bootstrap.media-breakpoint-up(sm) {
  .navbar {
    display: block;
  }
}
</code></pre> <h2 id=part-67c4816e04d140c4> <a class=anchor href="#part-67c4816e04d140c4"><span class=visuallyhidden>Установка permalink</span></a>Установка</h2> <p>Вы можете установить Sass migrator почти из тех же мест, где вы можете установить <a href="/dart-sass">Dart Sass</a>:</p> <h3 id=part-16dfeecfe4bc43a1> <a class=anchor href="#part-16dfeecfe4bc43a1"><span class=visuallyhidden>Автономный permalink</span></a>Автономный</h3> <p>Вы можете установить Sass migrator в Windows, Mac или Linux, загрузив пакет для своей операционной системы [из GitHub][] и <a href="https://katiek2.github.io/path-doc/">добавив его в свой <code>PATH</code></a>.</p> <h3 id=npm> <a class=anchor href="#npm"><span class=visuallyhidden>npm permalink</span></a>npm</h3> <p>Если вы используете Node.js, вы также можете установить Sass мигратор с помощью <a href="https://www.npmjs.com">npm</a>,&nbsp;запустив</p> <pre class="highlight plaintext"><code>npm install -g sass-migrator
</code></pre> <h3 id=chocolatey> <a class=anchor href="#chocolatey"><span class=visuallyhidden>Chocolatey permalink</span></a>Chocolatey</h3> <p>Если вы используете <a href="https://chocolatey.org">диспетчер пакетов Chocolatey</a> для Windows, вы можете установить Sass migrator,&nbsp;запустив</p> <pre class="highlight plaintext"><code>choco install sass-migrator
</code></pre> <h3 id=homebrew> <a class=anchor href="#homebrew"><span class=visuallyhidden>Homebrew permalink</span></a>Homebrew</h3> <p>Если вы используете <a href="https://brew.sh">менеджер пакетов Homebrew</a> для Mac <span class=caps>OS</span> X, вы можете установить Dart Sass,&nbsp;запустив</p> <pre class="highlight plaintext"><code>brew install sass/sass/migrator
</code></pre> <h2 id=part-84a603221cae2f1c> <a class=anchor href="#part-84a603221cae2f1c"><span class=visuallyhidden>Глобальные опции permalink</span></a>Глобальные&nbsp;опции</h2> <p>Эти параметры доступны для всех&nbsp;мигрантов.</p> <h3 id=migrate-deps> <a class=anchor href="#migrate-deps"><span class=visuallyhidden>&#8211;migrate-deps permalink</span></a><code>--migrate-deps</code> </h3> <p>Эта опция (сокращенно <code>-d</code>) указывает мигратору изменять не только таблицы стилей, которые явно передаются в командной строке, но также любые таблицы стилей, от которых они зависят, используя <a href="../at-rules/use">правило <code>@use</code></a>, <a href="../at-rules/forward">правило <code>@forward</code></a> или <a href="../at-rules/import">правило <code>@import</code></a>.</p> <pre class="highlight plaintext"><code>$ sass-migrator module --verbose style.scss
Migrating style.scss
$ sass-migrator module --verbose --migrate-deps style.scss
Migrating style.scss
Migrating _theme.scss
Migrating _fonts.scss
Migrating _grid.scss
</code></pre> <div class="sl-c-callout sl-c-callout--warning"><h3>⚠️&nbsp;Внимание!</h3> <p><a href="#module">Мигратор модулей</a> предполагает, что любая таблица стилей, зависящая от использования <a href="../at-rules/use">правила <code>@use</code></a> или <a href="../at-rules/forward">правило <code>@forward</code></a> уже была перенесена в систему модулей, поэтому он не будет пытаться перенести их, даже если передана опция&nbsp;<code>--migrate-deps</code>.</p> </div> <h3 id=load-path> <a class=anchor href="#load-path"><span class=visuallyhidden>&#8211;load-path permalink</span></a><code>--load-path</code> </h3> <p>Эта опция (сокращенно <code>-I</code>) сообщает мигратору <a href="../at-rules/use#load-paths">путь загрузки</a>, где он должен искать таблицы&nbsp;стилей. Его можно передавать несколько раз, чтобы обеспечить несколько путей&nbsp;загрузки. Более ранние пути загрузки имеют приоритет над более&nbsp;поздними.</p> <p>Предполагается, что зависимости, загруженные из путей загрузки, являются сторонними библиотеками, поэтому мигратор не будет их переносить, даже если передан <a href="#migrate-deps">параметр <code>--migrate-deps</code></a>.</p> <h3 id=dry-run> <a class=anchor href="#dry-run"><span class=visuallyhidden>&#8211;dry-run permalink</span></a><code>--dry-run</code> </h3> <p>Этот флаг (сокращенно <code>-n</code>) говорит мигратору не сохранять никаких изменений на&nbsp;диск. Вместо этого он печатает список файлов, которые он мог бы&nbsp;изменить. Обычно это используется вместе с <a href="#verbose">параметром <code>--verbose</code></a> для вывода содержимого изменений, которые также были бы&nbsp;внесены.</p> <pre class="highlight plaintext"><code>$ sass-migrator module --dry-run --migrate-deps style.scss
Dry run. Logging migrated files instead of overwriting...

style.scss
_theme.scss
_fonts.scss
_grid.scss
</code></pre> <h4 id=no-unicode> <a class=anchor href="#no-unicode"><span class=visuallyhidden>&#8211;no-unicode permalink</span></a><code>--no-unicode</code> </h4> <p>Этот флаг указывает программе миграции Sass только передавать на терминал символы <span class=caps>ASCII</span> как часть сообщений об&nbsp;ошибках. По умолчанию или если передан <code>--unicode</code>, средство миграции будет выдавать для этих сообщений символы, отличные от&nbsp;<span class=caps>ASCII.</span> Этот флаг не влияет на вывод&nbsp;<span class=caps>CSS.</span></p> <pre class="highlight plaintext"><code>$ sass-migrator --no-unicode module style.scss
line 1, column 9 of style.scss: Error: Could not find Sass file at 'typography'.
  ,
1 | @import "typography";
  |         ^^^^^^^^^^^^
  '
Migration failed!
$ sass-migrator --unicode module style.scss
line 1, column 9 of style.scss: Error: Could not find Sass file at 'typography'.
  ╷
1 │ @import "typography";
  │         ^^^^^^^^^^^^
  ╵
Migration failed!
</code></pre> <h3 id=verbose> <a class=anchor href="#verbose"><span class=visuallyhidden>&#8211;verbose permalink</span></a><code>--verbose</code> </h3> <p>Этот флаг (сокращенно <code>-v</code>) указывает мигратору вывести дополнительную информацию на&nbsp;консоль. По умолчанию он просто печатает имена файлов, которые были изменены, но в сочетании с <a href="#dry-run">параметром <code>--dry-run</code></a> он также печатает новое содержимое этих&nbsp;файлов.</p> <pre class="highlight plaintext"><code>$ sass-migrator module --verbose --dry-run style.scss
Dry run. Logging migrated files instead of overwriting...
&lt;==&gt; style.scss
@use "bootstrap" with (
  $body-bg: #000,
  $body-color: #111
);

@include bootstrap.media-breakpoint-up(sm) {
  .navbar {
    display: block;
  }
}
$ sass-migrator module --verbose style.scss
Migrating style.scss
</code></pre> <h2 id=part-277e6babc615a34> <a class=anchor href="#part-277e6babc615a34"><span class=visuallyhidden>Миграции permalink</span></a>Миграции</h2> <h3 id=part-a1000cc4d15aa46f> <a class=anchor href="#part-a1000cc4d15aa46f"><span class=visuallyhidden>Разделение permalink</span></a>Разделение</h3> <p>Эта миграция преобразует таблицы стилей, которые используют <a href="../breaking-changes/slash-div"><code>/</code> как разделение</a>, чтобы&nbsp;использовать вместо этого встроенная функция&nbsp;<code>math.div</code>.</p> <h4 id=pessimistic> <a class=anchor href="#pessimistic"><span class=visuallyhidden>&#8211;pessimistic permalink</span></a><code>--pessimistic</code> </h4> <p>По умолчанию, средство миграции преобразует операции <code>/</code> в <code>math.div</code>, даже если он не уверен, что это будет деление при&nbsp;оценке. Он оставляет их как есть только тогда, когда он может статически определить, что они делают что-то еще (например, когда не задействован SassScript или когда один из операндов является&nbsp;строкой). Функция <code>math.div</code> в настоящее время функционирует идентично оператору <code>/</code>, поэтому это безопасно, но может привести к новым предупреждениям, если один из аргументов <code>math.div</code> во время выполнения не является&nbsp;числом.</p> <p>Если вы хотите избежать такого поведения, вы можете передать флаг&nbsp;<code>--pessimistic</code>. С этим флагом мигратор будет преобразовывать только операции <code>/</code>, которые, как он точно знает, выполняют&nbsp;деление. Это предотвратит любые ненужные преобразования <code>math.div</code>, но, вероятно, оставит какое-то деление не мигрированным, если его нельзя определить&nbsp;статически.</p> <h3 id=part-1d4ad22a267c8a3f> <a class=anchor href="#part-1d4ad22a267c8a3f"><span class=visuallyhidden>Модуль permalink</span></a>Модуль</h3> <p>Эта миграция преобразует таблицы стилей, которые используют старое <a href="../at-rules/import">правило <code>@import</code></a> для загрузки зависимостей, так что они вместо этого используют систему модулей Sass через <a href="../at-rules/use">правило <code>@use</code></a>. Он не просто наивно меняет <code>@import</code> на <code>@use</code> — он разумно обновляет таблицы стилей, чтобы они продолжали работать так же, как и раньше, в том&nbsp;числе::</p> <ul> <li><p>Добавление пространств имен для использования участников (переменных, миксинов и функций) из других&nbsp;модулей.</p></li> <li><p>Добавление новых правил <code>@use</code> в таблицы стилей, которые использовали элементы, без их&nbsp;импорта.</p></li> <li><p>Преобразование переопределенных переменных по умолчанию в <a href="../at-rules/use#configuration">предложения <code>with</code></a>.</p></li> <li><p>Автоматическое удаление префиксов <code>-</code> и <code>_</code> из участников, которые используются из других файлов (потому что в противном случае они будут считаться <a href="../at-rules/use#private-members">частными</a> и могут использоваться только в том модуле, который они&nbsp;объявлены).</p></li> <li><p>Преобразование <a href="../at-rules/import#nesting">вложенного импорта</a> для использования вместо него <a href="../modules/meta#load-css">миксины <code>meta.load-css()</code></a>.</p></li> </ul> <div class="sl-c-callout sl-c-callout--warning"><h3>⚠️&nbsp;Внимание!</h3> <p>Поскольку переносчику модуля может потребоваться изменить определения участников <em>и</em> имена участников, важно либо запустить его с <a href="#migrate-deps">параметром <code>--migrate-deps</code></a>, либо убедиться, что вы передали ему все таблицы стилей в вашем пакете, либо&nbsp;заявление.</p> </div> <pre class="highlight plaintext"><code>$ cat style.scss
$body-bg: #000;
$body-color: #111;

@import "bootstrap";

@include media-breakpoint-up(sm) {
  .navbar {
    display: block;
  }
}
$ sass-migrator --migrate-deps module style.scss
$ cat style.scss
@use "bootstrap" with (
  $body-bg: #000,
  $body-color: #111
);

@include bootstrap.media-breakpoint-up(sm) {
  .navbar {
    display: block;
  }
}
</code></pre> <h4 id=part-b5349be3348df73d> <a class=anchor href="#part-b5349be3348df73d"><span class=visuallyhidden>Загрузка зависимостей permalink</span></a>Загрузка&nbsp;зависимостей</h4> <p>Мигратор модуля должен иметь возможность читать все таблицы стилей, зависящие от тех, которые он мигрирует, даже если <a href="#migrate-deps">параметр <code>--migrate-deps</code></a> не&nbsp;передан. Если мигратору не удается найти зависимость, вы получите сообщение об&nbsp;ошибке.</p> <pre class="highlight plaintext"><code>$ ls .
style.scss  node_modules
$ sass-migrator module style.scss
Error: Could not find Sass file at 'dependency'.
  ,
1 | @import "dependency";
  |         ^^^^^^^^^^^^
  '
  style.scss 1:9  root stylesheet
Migration failed!
$ sass-migrator --load-path node_modules module style.scss
</code></pre> <p>Если вы используете <a href="../at-rules/use#load-paths">путь загрузки</a> при компиляции таблиц стилей, не забудьте передать его в программу миграции с помощью <a href="#load-path">параметра <code>--load-path</code></a>.</p> <p>К сожалению, переносчик не поддерживает настраиваемые импортеры, но он имеет встроенную поддержку для разрешения <span class=caps>URL</span>-адресов, начинающихся с <code>~</code>, путем поиска в <code>node_modules</code>, аналогично <a href="https://github.com/webpack-contrib/sass-loader#resolving-import-at-rules">что поддерживает Webpack</a>.</p> <h4 id=remove-prefix> <a class=anchor href="#remove-prefix"><span class=visuallyhidden>&#8211;remove-prefix permalink</span></a><code>--remove-prefix</code> </h4> <p>Эта опция (сокращенно <code>-p</code>) принимает префикс идентификатора, который удаляется из начала всех имен переменных, миксинов и функций при их&nbsp;переносе. Участники, которые не начинаются с этого префикса, останутся без&nbsp;изменений.</p> <p><a href="../at-rules/import">Правило <code>@import</code></a> помещает все элементы верхнего уровня в одну глобальную область видимости, поэтому, когда это был стандартный способ загрузки таблиц стилей, каждый был мотивирован добавлять префиксы ко всем именам своих участников, чтобы избежать случайного переопределения некоторых других таблиц&nbsp;стилей. Модульная система решает эту проблему, поэтому теперь полезно автоматически удалять старые префиксы, когда они не&nbsp;нужны.</p> <pre class="highlight plaintext"><code>$ cat style.scss
@import "theme";

@mixin app-inverted {
  color: $app-bg-color;
  background-color: $app-color;
}
$ sass-migrator --migrate-deps module --remove-prefix=app- style.scss
$ cat style.scss
@import "theme";

@mixin inverted {
  color: theme.$bg-color;
  background-color: theme.$color;
}
</code></pre> <p>Когда вы передаете эту опцию, мигратор также сгенерирует <a href="../at-rules/import#import-only-files">таблицу стилей только для импорта</a>, которая <a href="../at-rules/forward">пересылает</a> всех участников с добавленным префиксом обратно, чтобы сохранить обратную совместимость для пользователей, которые импортировали&nbsp;библиотеку.</p> <p>Этот параметр может передаваться несколько раз или с несколькими значениями, разделенными&nbsp;запятыми. Каждый префикс будет удален из всех участников, у которых он&nbsp;есть. Если член соответствует нескольким префиксам, будет удален самый длинный совпадающий&nbsp;префикс.</p> <h4 id=forward> <a class=anchor href="#forward"><span class=visuallyhidden>&#8211;forward permalink</span></a><code>--forward</code> </h4> <p>Эта опция сообщает мигратору, какие элементы перенаправлять с помощью <a href="../at-rules/forward">правила <code>@forward</code></a>. Он поддерживает следующие&nbsp;настройки:</p> <ul> <li><p><code>none</code> (по умолчанию) не пересылает&nbsp;участников.</p></li> <li><p><code>all</code> перенаправляет все элементы, кроме тех, которые начинались с <code>-</code> или <code>_</code> в исходной таблице стилей, поскольку это обычно использовалось для обозначения закрытого члена пакета до того, как была введена модульная&nbsp;система.</p></li> <li><p><code>prefixed</code> пересылает только те элементы, которые начинаются с префикса, переданного в <a href="#remove-prefix">параметр <code>--remove-prefix</code></a>. Этот параметр можно использовать только вместе с параметром&nbsp;<code>--remove-prefix</code>.</p></li> </ul> <p>Все файлы, которые явно передаются в командной строке, будут перенаправлять элементы, которые транзитивно загружаются этими файлами с использованием правила&nbsp;<code>@import</code>. Файлы, загруженные с использованием <a href="#migrate-deps">параметра <code>--migrate-deps</code></a>, не будут пересылать новых&nbsp;участников. Этот параметр особенно полезен при миграции библиотеки Sass, поскольку он гарантирует, что пользователи этой библиотеки по-прежнему будут иметь доступ ко всем членам, которые она&nbsp;определяет.</p> <pre class="highlight plaintext"><code>$ cat _index.scss
@import "theme";
@import "typography";
@import "components";
$ sass-migrator --migrate-deps module --forward=all style.scss
$ cat _index.scss
@forward "theme";
@forward "typography";
@forward "components";
</code></pre> <h3 id=part-9f3b6c07ad83c831> <a class=anchor href="#part-9f3b6c07ad83c831"><span class=visuallyhidden>Пространство имен permalink</span></a>Пространство&nbsp;имен</h3> <p>Эта миграция позволяет вам легко изменять <a href="../at-rules/use#choosing-a-namespace">пространства имен</a> правил <code>@use</code> в таблице&nbsp;стилей. Это полезно, если пространства имен, которые модуль миграции генерирует для разрешения конфликтов, не идеальны, или если вы не хотите использовать пространство имен по умолчанию, которое Sass определяет на основе <span class=caps>URL</span>-адреса&nbsp;правила.</p> <h4 id=rename> <a class=anchor href="#rename"><span class=visuallyhidden>&#8211;rename permalink</span></a><code>--rename</code> </h4> <p>Вы можете указать мигратору, какие пространства имен вы хотите изменить, передав выражения в параметр&nbsp;<code>--rename</code>.</p> <p>Эти выражения имеют форму от <code>&lt;old-namespace&gt; до &lt;new-namespace&gt;</code> или&nbsp;<code>url &lt;rule-url&gt; до &lt;new-namespace&gt;</code>. В этих выражениях, <code>&lt;old-namespace&gt;</code> и <code>&lt;rule-url&gt;</code> являются <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">регулярными выражениями</a>, которые совпадают со всем существующим пространством имен или <span class=caps>URL</span>-адресом правила <code>@use</code>,&nbsp;соответственно.</p> <p>Для простых случаев использования это выглядит как <code>--rename &#39;old to new&#39;</code>, которое переименовало бы правило <code>@use</code> с пространством имен <code>old</code> в&nbsp;<code>new</code>.</p> <p>Однако вы также можете сделать это для выполнения более сложных&nbsp;переименований. Например, предположим, что ранее у вас была таблица стилей, которая выглядела&nbsp;так:</p> <pre class="highlight scss"><code><span class="k">@import</span> <span class="s2">"components/button/lib/mixins"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s2">"components/input/lib/mixins"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s2">"components/table/lib/mixins"</span><span class="p">;</span>
<span class="c1">// ...
</span></code></pre> <p>Поскольку все эти <span class=caps>URL</span>-адреса будут иметь пространство имен по умолчанию <code>mixins</code> при миграции на правила <code>@use</code>, модуль миграции модуля может в конечном итоге сгенерировать что-то вроде&nbsp;этого:</p> <pre class="highlight scss"><code><span class="k">@use</span> <span class="s2">"components/button/lib/mixins"</span> <span class="nt">as</span> <span class="nt">button-lib-mixins</span><span class="p">;</span>
<span class="k">@use</span> <span class="s2">"components/input/lib/mixins"</span> <span class="nt">as</span> <span class="nt">input-lib-mixins</span><span class="p">;</span>
<span class="k">@use</span> <span class="s2">"components/table/lib/mixins"</span> <span class="nt">as</span> <span class="nt">table-lib-mixins</span><span class="p">;</span>
<span class="c1">// ...
</span></code></pre> <p>Это допустимый код, поскольку пространства имен не конфликтуют, но они намного сложнее, чем должны&nbsp;быть. Соответствующая часть <span class=caps>URL</span>-адреса - это имя компонента, поэтому мы можем использовать средство миграции пространства имен для извлечения этой&nbsp;части.</p> <p>Если мы запустим средство переноса пространства имен с помощью <code>--rename &#39;url components/(\w+)/lib/mixins to \1&#39;</code>, мы&nbsp;получим:</p> <pre class="highlight scss"><code><span class="k">@use</span> <span class="s2">"components/button/lib/mixins"</span> <span class="nt">as</span> <span class="nt">button</span><span class="p">;</span>
<span class="k">@use</span> <span class="s2">"components/input/lib/mixins"</span> <span class="nt">as</span> <span class="nt">input</span><span class="p">;</span>
<span class="k">@use</span> <span class="s2">"components/table/lib/mixins"</span> <span class="nt">as</span> <span class="nt">table</span><span class="p">;</span>
<span class="c1">// ...
</span></code></pre> <p>Сценарий переименования здесь говорит, что нужно найти все правила <code>@use</code> <span class=caps>URL</span>-адреса которых выглядят как <code>components/(\w+)/lib/mixins</code> (<code>\w+</code> в регулярном выражении означает соответствие любому слову из одного или нескольких&nbsp;символов). <code>\1</code> в предложении вывода означает замену содержимого первого набора круглых скобок в регулярном выражении (вызываемом <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges">группа</a>).</p> <p>Если вы хотите применить несколько переименований, вы можете передать параметр <code>--rename</code> несколько раз или разделить их точкой с запятой или разрывом&nbsp;строки. Будет использовано только первое переименование, применимое к данному правилу, поэтому вы можете передать что-то вроде <code>--rename &#39;a to b; b to a&#39;</code>, чтобы поменять местами пространства имён <code>a</code> и&nbsp;<code>b</code>.</p> <h4 id=force> <a class=anchor href="#force"><span class=visuallyhidden>&#8211;force permalink</span></a><code>--force</code> </h4> <p>По умолчанию, если два или более правил <code>@use</code> имеют одно и то же пространство имен после миграции, мигратор завершится ошибкой и никакие изменения не будут&nbsp;внесены.</p> <p>В этом случае вы обычно хотите изменить свой сценарий <code>--rename</code>, чтобы избежать конфликтов, но если вы предпочитаете принудительную миграцию, вы можете вместо этого передать&nbsp;<code>--force</code>.</p> <p>С помощью <code>--force</code>, если возникают какие-либо конфликты, первое правило <code>@use</code> получит свое предпочтительное пространство имен, тогда как последующие правила <code>@use</code> с тем же предпочтительным пространством имен вместо этого будут иметь добавленный числовой&nbsp;суффикс.</p> </div> </div> </div> </div> </div> </div> </div> </div> <div class=sl-c-alert> <div aria-labelledby=release-nav class='sl-l-container sl-c-list-horizontal-wrapper'> <ul class=sl-l-grid--justify-center> <li id=release-nav> Текущие релизы: </li> <li> <span class=release-name><a href="/dart-sass">Dart Sass</a>&#32;<a href="https://github.com/sass/dart-sass/releases/tag/1.38.2">1.38.2</a></span> </li> <li> <span class=release-name><a href="/libsass">LibSass</a>&#32;<a href="https://github.com/sass/libsass/releases/tag/3.6.5">3.6.5</a></span> </li> <li> <span class=release-name><a href="/ruby-sass">Ruby Sass</a><span aria-label=coffin role=presentation> &#32; ⚰ </span></span> </li> <li class='sl-l-grid__column sl-l-large-grid__column--auto-size'> <a href="/implementation">Руководство по внедрению</a> </li> </ul> </div> </div> </main> <footer class='site-footer contentinfo' itemscope=itemscope itemtype='http://schema.org/WPFooter' role=contentinfo> <div class='sl-l-container sl-l-section'> <div class='sl-l-grid sl-l-grid--full sl-l-large-grid--fit sl-l-large-grid--center sl-l-large-grid--gutters'> <div class=sl-l-grid__column> <p>Sass &copy; 2006&ndash;2021 команда Sass и многочисленные участники. Он доступен для использования и модификации по <a href="https://github.com/sass/dart-sass/blob/master/LICENSE">лицензии MIT&nbsp;</a>.</p> <nav class=sl-c-list-horizontal-wrapper> <ul> <li><a href="https://github.com/sass">Sass на GitHub</a></li> <li><a href="https://github.com/w3ref/sass-site">Исходный код веб-сайта</a></li> <li><a href="/styleguide">Руководство по стилю</a></li> <li><a href="/community-guidelines">Рекомендации сообщества</a></li> </ul> </nav> </div> <div class='sl-l-grid__column sl-l-large-grid__column--auto-size sl-l-large-grid--justify-right'> <a class=twitter-follow-button data-show-count=false data-size=large href='https://twitter.com/SassCSS'> Следите за @SassCSS </a> <script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script> </div> </div> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> <script>
  docsearch({
    apiKey: 'a409ff5d6a2476083c1a8dd1f8c04ec5',
    indexName: 'sass-lang',
    inputSelector: 'input.search',
    transformData: function(hits) {
      var domain = window.location.origin + "/";
      hits.forEach(function(hit) {
        if (!hit.url.startsWith(domain)) {
          hit.url = hit.url.replace(/^https?:\/\/[^\/]+\//, domain);
        }
      });
      return hits;
    },
    debug: false
  });
</script> <script src="/assets/js/sass-b8cb06ab.js"></script> </body> </html>